(this.webpackJsonppart15=this.webpackJsonppart15||[]).push([[0],{41:function(e,t,n){"use strict";n.r(t);var r=n(16),c=n.n(r),a=n(4),s=n(2),o=n(0),i=function(e){var t=e.personsToShow,n=e.confirmDeletion;return t.map((function(e){return Object(o.jsxs)("p",{children:[e.name,"   ",e.number,Object(o.jsx)("button",{onClick:function(){n(e)},children:"delete"})]},e.id)}))},u=function(e){var t=e.newFilter,n=e.setNewFilter;return Object(o.jsx)("form",{children:Object(o.jsxs)("div",{children:["filter shown with: ",Object(o.jsx)("input",{value:t,onChange:function(e){n(e.target.value)}})]})})},d=n(3),l=n.n(d),b=n(6),f=n(5),j=n.n(f),p="/api/persons",m={getAll:function(){var e=Object(b.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=j.a.get(p),e.next=3,t;case 3:return n=e.sent,e.abrupt("return",n.data);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),create:function(){var e=Object(b.a)(l.a.mark((function e(t){var n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=j.a.post(p,t),e.next=3,n;case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),update:function(){var e=Object(b.a)(l.a.mark((function e(t,n){var r,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=j.a.put("".concat(p,"/").concat(t),n),e.next=3,r;case 3:return c=e.sent,e.abrupt("return",c.data);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),remove:function(e){j.a.delete("".concat(p,"/").concat(e.id))}},h=function(e){var t=e.persons,n=e.newName,r=e.newNumber,c=e.setPersons,a=e.setErrorMessage,s=e.setMessageType,i=e.setNewName,u=e.setNewNumber;return Object(o.jsxs)("form",{onSubmit:function(e){if(e.preventDefault(),t.some((function(e){return e.name===n}))){if(window.confirm("".concat(n," is already added to phonebook,repalce the old number with a new one?"))){var o=t.find((function(e){return e.name===n})),d={name:n,number:r,id:o.id};m.update(o.id,d).then((function(e){c(t.map((function(t){return t.id!==o.id?t:e}))),s("success"),a("Updated ".concat(n," with new number:").concat(r)),setTimeout((function(){a("")}),5e3)})).catch((function(e){console.log("err",e),c(t.filter((function(e){return e.id!==o.id}))),a("Person '".concat(d.name,"' was already removed from server")),s("fail"),setTimeout((function(){a("")}),5e3)}))}}else{var l={name:n,number:r};m.create(l).then((function(e){c(t.concat(e)),s("success"),a("Added ".concat(n," .")),setTimeout((function(){a("")}),5e3),i(""),u("")})).catch((function(e){console.log(e.response.data),s("fail"),a("".concat(e.response.data.error)),setTimeout((function(){a("")}),5e3)}))}},children:[Object(o.jsxs)("div",{children:["name: ",Object(o.jsx)("input",{value:n,onChange:function(e){i(e.target.value)}})]}),Object(o.jsxs)("div",{children:["number: ",Object(o.jsx)("input",{value:r,onChange:function(e){u(e.target.value)}})]}),Object(o.jsx)("div",{children:Object(o.jsx)("button",{type:"submit",children:"add"})})]})},O=function(e){var t=e.messageType,n=e.message;return n?"success"===t?Object(o.jsx)("div",{style:{color:"green",border:"solid",padding:10,backgroundColor:"lightgrey",fontSize:16},children:n}):"fail"===t?Object(o.jsx)("div",{style:{color:"red",border:"solid",padding:10,backgroundColor:"lightgrey",fontSize:16},children:n}):Object(o.jsx)("div",{children:n}):" "},v=function(){var e=Object(s.useState)([]),t=Object(a.a)(e,2),n=t[0],r=t[1],c=Object(s.useState)("insert a person"),d=Object(a.a)(c,2),l=d[0],b=d[1],f=Object(s.useState)("insert a number"),j=Object(a.a)(f,2),p=j[0],v=j[1],w=Object(s.useState)(""),g=Object(a.a)(w,2),x=g[0],y=g[1],N=Object(s.useState)(""),T=Object(a.a)(N,2),S=T[0],k=T[1],C=Object(s.useState)(""),D=Object(a.a)(C,2),M=D[0],E=D[1];Object(s.useEffect)((function(){m.getAll().then((function(e){r(e)}))}),[]);var F=""===x?n:n.filter((function(e){return e.name.toUpperCase().includes(x.toUpperCase())}));return Object(o.jsxs)("div",{children:[Object(o.jsx)("h2",{children:"Phonebook"}),Object(o.jsx)(O,{messageType:M,message:S}),Object(o.jsx)("br",{}),Object(o.jsx)(u,{newFilter:x,setNewFilter:y}),Object(o.jsx)("h2",{children:"add a new"}),Object(o.jsx)(h,{newName:l,newNumber:p,persons:n,setNewName:b,setNewNumber:v,setPersons:r,errorMessage:S,setErrorMessage:k,messageType:M,setMessageType:E}),Object(o.jsx)("h2",{children:"Numbers"}),Object(o.jsx)(i,{personsToShow:F,confirmDeletion:function(e){window.confirm("Delete ".concat(e.name,"?"))&&(m.remove(e),r(n.filter((function(t){return t.id!==e.id}))),E("success"),k("Deletion of ".concat(e.name," completed!")),setTimeout((function(){k("")}),5e3))}})]})};c.a.render(Object(o.jsx)(v,{}),document.getElementById("root"))}},[[41,1,2]]]);
//# sourceMappingURL=main.3dcb308b.chunk.js.map